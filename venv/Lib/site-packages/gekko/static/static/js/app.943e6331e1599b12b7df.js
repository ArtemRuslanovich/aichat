webpackJsonp([1],{"/NwD":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("7+uW"),n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("transition",{attrs:{name:"modal"}},[t.showModal?o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n              "+t._s(t.httpError.header)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n              "+t._s(t.httpError.body)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-body"},[t._t("error-reporting",[t._v("\n              "+t._s(t.httpError.report)+"\n            ")])],2),t._v(" "),o("div",{staticClass:"modal-footer"},[t._t("footer",[o("button",{staticClass:"modal-default-button",on:{click:function(e){t.$store.commit("showErrorModal",!1)}}},[t._v("\n                OK\n              ")])])],2)])])]):t._e()]),t._v(" "),o("router-view")],1)},staticRenderFns:[]};var s=o("VU/8")({name:"App",data:function(){return{}},computed:{showModal:function(){return this.$store.state.showErrorModal},httpError:function(){return this.$store.state.httpError}},mounted:function(){this.$store.dispatch("initialize"),this.$store.dispatch("poll")},methods:{}},n,!1,function(t){o("qa+U")},null,null).exports,r=o("pH0I"),i=o.n(r),l=this;window.onresize=function(){l.plotlyResize};var c={name:"Plot",props:{externalId:{type:Number,required:!0}},data:function(){return{id:Math.random().toString(36).substring(7)}},computed:{updateNumber:function(){return this.$state.updateNumber},plotData:function(){var t=this;return this.$store.state.plots.length>0&&this.$store.state.plots.find(function(e){return e.id===t.externalId}).data},layout:function(){var t=this;return this.$store.state.plots.find(function(e){return e.id===t.externalId}).layout}},watch:{numPlots:function(){this.plotlyResize}},created:function(){var t=this;this.$store.watch(function(t){return t.plots},function(){i.a.react(t.id,t.plotData,t.layout)},{deep:!0})},beforeDestroy:function(){window.removeEventListener("resize",this.plotlyResize)},mounted:function(){window.addEventListener("resize",this.plotlyResize),this.plotData&&i.a.newPlot(this.id,this.plotData,this.layout)},methods:{plotlyResize:function(){i.a.Plots.resize(this.id)},removePlot:function(){this.$store.commit("removePlot",this.externalId)}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"plot-div"},[this.$store.state.plots.length>2&&0!=this.externalId?e("button",{staticClass:"btn btn-sm btn-danger plot-close",attrs:{type:"button"},on:{click:this.removePlot}},[this._v("X")]):this._e(),this._v(" "),e("div",{attrs:{id:this.id}})])},staticRenderFns:[]};var u=o("VU/8")(c,d,!1,function(t){o("k3ee")},null,null).exports,h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{src:"/static/GekkoLogo.png",height:"65px"}}),t._v(" "),o("ul",{staticClass:"nav nav-tabs"},[o("li",{staticClass:"nav-item tab"},[o("a",{staticClass:"nav-link ",class:{active:"Model"==t.activeTab},on:{click:function(e){t.activeTab="Model"}}},[t._v("Model")])]),t._v(" "),o("li",{staticClass:"nav-item tab"},[o("a",{staticClass:"nav-link",class:{active:"Variables"==t.activeTab},on:{click:function(e){t.activeTab="Variables"}}},[t._v("Variables")])])]),t._v(" "),o("div",{staticClass:"tab-div"},[o("transition",{attrs:{name:"fade"}},["Model"===t.activeTab?[o("div",{staticClass:"table-responsive tab-table"},[o("table",{staticClass:"table table-striped table-sm"},[o("thead",[o("tr",[o("th",[t._v("Property")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",t._l(t.modelData,function(e,a){return o("tr",{key:a.id},[o("td",[t._v(t._s(a))]),t._v(" "),o("td",[t._v(t._s(e))])])}))])])]:t._e()],2),t._v(" "),o("transition",{attrs:{name:"fade"}},["Variables"===t.activeTab?[t.varsData?o("div",{staticClass:"tab-table"},[o("div",{staticStyle:{"overflow-y":"auto","max-height":"inherit"}},t._l(t.varsData,function(e,a){return o("ul",{key:e.id,staticClass:"tab-table-item"},[o("a",{staticClass:"var-dropdown",on:{click:function(o){t.toggle(e,a)}}},[t._v("\n                "+t._s(a)+" "+t._s(e.ishidden?"►":"▼")+"\n              ")]),t._v(" "),o("transition",{attrs:{name:"fade"}},[e.ishidden?t._e():o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table table-striped table-sm"},[o("thead",[o("tr",[o("th",[t._v("Property")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",t._l(e,function(e,a){return o("tr",{key:a.id},["ishidden"!=a?o("td",[t._v(t._s(a))]):t._e(),t._v(" "),"ishidden"!=a?o("td",[t._v(t._s(Number.isInteger(e)&&e<=1e5&&e>-1e5?e:e.toExponential(4)))]):t._e()])}))])])])],1)}))]):t._e()]:t._e()],2)],1)])},staticRenderFns:[]};var p=o("VU/8")({name:"Tabs",data:function(){return{activeTab:"Model",open:!1}},computed:{modelData:function(){return this.$store.state.modelData},varsData:function(){return this.$store.state.varsData}},methods:{toggle:function(t,e){t.ishidden=!t.ishidden,this.$forceUpdate()}}},h,!1,function(t){o("uXHh")},null,null).exports,m=o("/ocq"),v={components:{plot:u},data:function(){return{}}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-fullscreen-container"},[o("div",{staticClass:"modal-body"},[t._t("body",[o("plot",{attrs:{"external-id":0}})])],2),t._v(" "),o("div",{staticClass:"modal-footer"},[t._t("footer",[o("button",{on:{click:function(e){t.$emit("close",{})}}},[t._v("Close")])])],2)])])])])},staticRenderFns:[]};var _={name:"Main",components:{plot:u,tabs:p,modalPlot:o("VU/8")(v,f,!1,function(t){o("/NwD")},null,null).exports},data:function(){return{}},computed:{plotArray:function(){return this.$store.state.plots},displayPlots:function(){return this.plotArray.filter(function(t){return 0!==t.id})},statusStyle:function(){return{border:this.$store.state.communicationError?"red 2px":"green 2px",padding:"3px",borderTopLeftRadius:"2px",borderStyle:"solid",color:this.$store.state.communicationError?"red":"green"}}},mounted:function(){},methods:{addPlot:function(){this.$store.commit("addPlot")},removePlot:function(t){console.log("Removing plot",t),this.$store.commit("removePlot",t)},showModalPlot:function(t){this.$store.commit("showFullscreenPlot",t)}}},b={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mainDiv"},[o("modalPlot",{attrs:{hidden:!t.$store.state.fullscreenPlot},on:{close:function(e){t.showModalPlot(!1)}}}),t._v(" "),o("div",{staticClass:"row",staticStyle:{"margin-right":"0px"}},[o("div",{staticClass:"col-sm-3"},[o("tabs")],1),t._v(" "),o("div",{staticClass:"col-sm-9"},[o("div",{staticClass:"plots-div"},t._l(t.displayPlots,function(t){return o("div",{key:t.id},[o("plot",{attrs:{"external-id":t.id}})],1)})),t._v(" "),o("button",{staticClass:"btn btn-primary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:t.addPlot}},[t._v("Add Plot")]),t._v(" "),o("button",{staticClass:"btn btn-secondary",staticStyle:{"margin-top":"10px"},attrs:{type:"button"},on:{click:function(e){t.showModalPlot(!0)}}},[t._v("Fullscreen plot")])])]),t._v(" "),o("div",{staticClass:"communication-status",style:t.statusStyle},[o("p",[t._v("Status: "+t._s(t.$store.state.communicationError?"Error":"Good"))])])],1)},staticRenderFns:[]};var y=o("VU/8")(_,b,!1,function(t){o("dfTA")},null,null).exports;a.a.use(m.a);var g=new m.a({routes:[{path:"/",name:"Main",component:y}]}),P=o("//Fk"),w=o.n(P),C=o("fZjL"),E=o.n(C),k=o("mvHQ"),D=o.n(k),$=o("NYxO");a.a.use($.a);var x=new $.a.Store({state:{numPlots:0,communicationError:!1,fullscreenPlot:!1,plotIdCounter:0,plots:[],plotData:{},modelData:{},varsData:{},showErrorModal:!1,httpError:{header:"",body:"",report:"Please report any Gekko project errors as\n        issues at https://github.com/BYU-PRISM/GEKKO"},httpRoot:"http://"+location.hostname+":"+location.port,updateNumber:0},mutations:{removePlot:function(t,e){t.numPlots--,t.plots=t.plots.filter(function(t){return t.id!==e})},addPlot:function(t,e){t.plots.push({id:t.plotIdCounter,data:JSON.parse(D()(t.plotData)),layout:{}}),t.plotIdCounter++,t.numPlots++},setCommunicationError:function(t,e){t.communicationError||(t.showErrorModal||(t.showErrorModal=e),t.communicationError=e)},sethttpError:function(t,e){t.httpError=e},showFullscreenPlot:function(t,e){t.fullscreenPlot=e},setPlotData:function(t,e){t.plotData=e;for(var o=0;o<t.plots.length;o++)for(var a=t.plots[o].data,n=0;n<a.length;n++){var s=a[n],r=t.plotData.find(function(t){return t.name===s.name});s.x=r.x,s.y=r.y}t.updateNumber++},updatePlotLayout:function(t,e){t.plots.find(function(t){return t.id===e.id}).layout=e.layout},setModelData:function(t,e){t.modelData=e},setVarsData:function(t,e){t.varsData=e},showErrorModal:function(t,e){t.showErrorModal=e}},actions:{get_data:function(t){var e=t.commit,o=t.state,a=fetch(this.state.httpRoot+"/data").then(function(t){return t.json()}).then(function(t){console.log("data",t),e("setModelData",t.model);var o=[],a=t.vars.variables.length+t.vars.parameters.length+t.vars.intermediates.length+t.vars.constants.length>5,n=t.vars;for(var s in t.vars)for(var r in n[s]){var i={x:n[s][r].x,y:n[s][r].data,mode:n[s][r].data.length>1?"lines":"markers",type:"scatter",name:n[s][r].name,visible:a||"intermediates"===s?"legendonly":"true"};o.push(i)}e("setPlotData",o)}).catch(function(t){console.log("Error fetching from get_data:",t)}),n=["INFO","APM"],s=void 0,r={},i=fetch(this.state.httpRoot+"/get_options").then(function(t){return t.json()}).then(function(t){return s=t,E()(t).filter(function(t){return!n.includes(t)})}).then(function(t){t.forEach(function(t){return r[t]=s[t],r[t].ishidden=!o.varsData[t]||o.varsData[t].ishidden,null})}).then(function(){e("setVarsData",r)});return w.a.all([a,i])},initialize:function(t){var e=t.commit;(0,t.dispatch)("get_data").then(function(){e("addPlot"),e("updatePlotLayout",{id:0,layout:{height:window.innerHeight-150}}),e("addPlot")})},poll:function(t){var e=this,o=t.commit,a=t.dispatch;fetch(this.state.httpRoot+"/poll").then(function(t){return t.json()}).then(function(t){!0===t.updates&&a("get_data"),e.showModal=!1,o("setCommunicationError",!1),setTimeout(function(){a("poll")},1e3)},function(t){console.log("HTTP Polling Error, Status:",t),o("sethttpError",{header:"Internal Communication Error",body:"This most often happens when the Gekko script\n                crashes or exits for some reason. If this happens\n                we cannot get any updates from your Gekko model.\n                Please close this window and restart the script\n                if this is the problem, otherwise report the\n                following error.\n                  "+t,report:"Please report any Gekko project errors as\n              issues at https://github.com/BYU-PRISM/GEKKO"}),o("setCommunicationError",!0)})}}});a.a.config.productionTip=!1,new a.a({el:"#app",store:x,router:g,components:{App:s,Plot:u,Tabs:p},template:"<App/>"})},dfTA:function(t,e){},k3ee:function(t,e){},"qa+U":function(t,e){},uXHh:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.943e6331e1599b12b7df.js.map